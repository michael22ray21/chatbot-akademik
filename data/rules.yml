version: "2.0"

rules:

  - rule: welcome user
    conversation_start: true  # this rule only applies at the beginning of a conversation
    steps:
      - intent: greet
      - action: utter_greet

  - rule: Ask the user to rephrase whenever they send a message with low NLU confidence
    steps:
      - intent: nlu_fallback
      - action: utter_please_rephrase

  - rule: Say goodbye anytime the user says goodbye
    steps:
      - intent: goodbye
      - action: utter_goodbye

  - rule: Say 'I am a bot' anytime the user challenges
    steps:
      - intent: bot_challenge
      - action: utter_iamabot

  - rule: respond to chitchat
    steps:
      - intent: chitchat
      - action: utter_chitchat

  - rule: submit form
    condition:
    - active_loop: ask_step_pindah_kelas_form
    steps:
    # deactivate the form
    - action: ask_step_pindah_kelas_form
    - active_loop: null
    - slot_was_set:
      - requested_slot: null
    # after the form is done
    - action: utter_ask_more_info